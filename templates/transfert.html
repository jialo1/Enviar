<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-translate="transfer-page-title">Enviar - Nouveau Transfert</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="stylesheet" href="/static/css/calculator.css">
    <link rel="stylesheet" href="/static/css/whatsapp-buttons.css?v=1">
    <link rel="stylesheet" href="/static/css/whatsapp-floating.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-XXXXXXXXXX', {
            'analytics_storage': 'denied' // Par d√©faut, les cookies sont d√©sactiv√©s
        });
    </script>
</head>
<body>
    <header class="header">
        <div class="header-container">
            <a href="/" class="logo">
                <img src="/images/Logo1.png" alt="Enviar Logo" style="height: 40px;">
            </a>
            <nav class="nav-menu">
                <ul class="nav-links">
                    <li><a href="/" data-translate="nav-home">Accueil</a></li>
                    <li><a href="/fonctionnement" data-translate="nav-how-it-works">Fonctionnement</a></li>
                    <li><a href="/a-propos" data-translate="nav-about">√Ä propos</a></li>
                    <li><a href="/contact" data-translate="nav-contact">Contact</a></li>
                </ul>
                <div class="nav-buttons">
                    <select class="language-selector">
                        <option value="fr">üá´üá∑ FR</option>
                        <option value="en">üá®üá¶ EN</option>
                    </select>
                </div>
            </nav>
            <div class="menu-toggle" aria-label="Menu">
                <i class="fas fa-bars"></i>
            </div>
        </div>
    </header>

    <main>
        <div class="transfert-layout">
            <div class="transfert-container">
                <div class="steps-progress">
                    <div class="step active" data-step="1">
                        <div class="step-number">1</div>
                        <div class="step-title" data-translate="step-details">D√©tails</div>
                    </div>
                    <div class="step" data-step="2">
                        <div class="step-number">2</div>
                        <div class="step-title" data-translate="step-your-info">Vos Info</div>
                    </div>
                    <div class="step" data-step="3">
                        <div class="step-number">3</div>
                        <div class="step-title" data-translate="step-beneficiary">B√©n√©ficiaire</div>
                    </div>
                    <div class="step" data-step="4">
                        <div class="step-number">4</div>
                        <div class="step-title" data-translate="step-confirm">Confirmer</div>
                    </div>
                </div>

                <form id="transfert-form" class="transfert-form">
                    <!-- √âtape 1: D√©tails du transfert -->
                    <div class="form-step active" data-step="1">
                        <h2 data-translate="transfer-details">D√©tails du transfert</h2>
                        <div class="form-group">
                            <label data-translate="sending-country">Pays de d√©part</label>
                            <div id="pays-depart-display" class="pays-display"></div>
                        </div>
                        <div class="form-group">
                            <label data-translate="receiving-country">Pays de destination</label>
                            <div id="pays-destination-display" class="pays-display"></div>
                        </div>
                        <div class="form-group">
                            <label data-translate="amount-to-send">Montant √† envoyer</label>
                            <input type="text" id="montant-display" readonly>
                        </div>
                        <div class="form-group">
                            <label data-translate="amount-to-receive">Montant √† recevoir</label>
                            <input type="text" id="montant-recu-display" readonly>
                        </div>
                        <div class="form-group">
                            <label data-translate="transfer-fees">Frais de transfert</label>
                            <input type="text" id="frais-display" readonly>
                        </div>
                        <div class="form-group">
                            <label data-translate="total-to-pay">Total √† payer</label>
                            <input type="text" id="total-display" readonly>
                        </div>
                        <button type="button" class="next-step cta-button" data-translate="continue">Continuer</button>
                    </div>

                    <!-- √âtape 2: Vos informations -->
                    <div class="form-step" data-step="2">
                        <h2 data-translate="your-info">Vos informations</h2>
                        <div class="form-group">
                            <label for="nom" data-translate="full-name">Nom complet</label>
                            <input type="text" id="nom" name="nom" required data-translate-placeholder="full-name">
                        </div>
                        <div class="form-group">
                            <label for="telephone" data-translate="phone">T√©l√©phone</label>
                            <input type="tel" id="telephone" name="telephone" required data-translate-placeholder="phone">
                        </div>
                        <div class="form-group">
                            <label for="email" data-translate="email">Email</label>
                            <input type="email" id="email" name="email" required data-translate-placeholder="email">
                        </div>
                        <div class="form-buttons">
                            <button type="button" class="prev-step" data-translate="back">Retour</button>
                            <button type="button" class="next-step cta-button" data-translate="continue">Continuer</button>
                        </div>
                    </div>

                    <!-- √âtape 3: B√©n√©ficiaire -->
                    <div class="form-step" data-step="3">
                        <h2 data-translate="beneficiary-info">Informations du b√©n√©ficiaire</h2>
                        <div class="form-group">
                            <label for="beneficiaire-nom" data-translate="beneficiary-name">Nom complet du b√©n√©ficiaire</label>
                            <input type="text" id="beneficiaire-nom" name="beneficiaire-nom" required data-translate-placeholder="beneficiary-name">
                        </div>
                        <div class="form-group">
                            <label for="beneficiaire-telephone" data-translate="beneficiary-phone">T√©l√©phone du b√©n√©ficiaire</label>
                            <input type="tel" id="beneficiaire-telephone" name="beneficiaire-telephone" required data-translate-placeholder="beneficiary-phone">
                        </div>
                        <div class="form-group">
                            <label for="beneficiaire-adresse" data-translate="beneficiary-address">Adresse du b√©n√©ficiaire</label>
                            <input type="text" id="beneficiaire-adresse" name="beneficiaire-adresse" required data-translate-placeholder="beneficiary-address">
                        </div>
                        <div class="form-buttons">
                            <button type="button" class="prev-step" data-translate="back">Retour</button>
                            <button type="button" class="next-step cta-button" data-translate="continue">Continuer</button>
                        </div>
                    </div>

                    <!-- √âtape 4: Confirmation -->
                    <div class="form-step" data-step="4">
                        <h2 data-translate="transfer-summary">R√©capitulatif de votre transfert</h2>
                        <div class="confirmation-summary">
                            <div class="resultat-item">
                                <span data-translate="sending">Envoi :</span>
                                <span id="summary-montant-envoyer"></span>
                            </div>
                            <div class="summary-item">
                                <span data-translate="amount-to-receive">Montant √† recevoir :</span>
                                <span id="summary-montant-recu"></span>
                            </div>
                            <div class="summary-item">
                                <span data-translate="transfer-fees">Frais de transfert :</span>
                                <span id="summary-frais"></span>
                            </div>
                            <div class="summary-item">
                                <span data-translate="total-to-pay">Total √† payer :</span>
                                <span id="summary-total"></span>
                            </div>
                            <div class="summary-item" style="background: none; box-shadow: none; display: block; text-align: left; margin-top: 1.5em;">
                                <div><strong>Pays d'envoi :</strong> <span id="summary-pays-depart"></span></div>
                                <div><strong>Pays de r√©ception :</strong> <span id="summary-pays-destination"></span></div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="message" data-translate="additional-info">Informations compl√©mentaires (optionnel)</label>
                            <textarea id="message" name="message" rows="3" data-translate-placeholder="message"></textarea>
                        </div>
                        <div class="form-buttons">
                            <button type="button" class="prev-step" data-translate="back">Retour</button>
                            <a id="whatsapp-continue" href="#" target="_blank" class="cta-button" style="flex:1 1 0; display:flex; align-items:center; justify-content:center; gap:0.5em; text-decoration:none;">
                                <i class="fab fa-whatsapp"></i> <span data-translate="continue-whatsapp">Continuer sur WhatsApp</span>
                            </a>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </main>

    {% include 'cookie-banner.html' %}
    {% include 'footer.html' %}

    <script src="/static/js/calculator.js"></script>
    <script src="/static/js/translator.js"></script>
    <script src="/static/js/transfert.js"></script>
    <script src="/static/js/main.js"></script>
    <script src="/static/js/cookies.js"></script>

    <!-- Modal de confirmation -->
    <div id="confirmation-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2 data-translate="transfer-confirmation-title">Confirmation de votre transfert</h2>
            <div class="resultat-calcul">
                <div class="resultat-item">
                    <span data-translate="sending">Envoi :</span>
                    <span id="modal-montant-envoyer"></span>
                </div>
                <div class="resultat-item">
                    <span data-translate="amount-to-receive">Montant √† recevoir :</span>
                    <span id="modal-montant-recu"></span>
                </div>
                <div class="resultat-item">
                    <span data-translate="transfer-fees">Frais de transfert :</span>
                    <span id="modal-frais"></span>
                </div>
                <div class="resultat-item">
                    <span data-translate="total-to-pay">Total √† payer :</span>
                    <span id="modal-total"></span>
                </div>
            </div>
            <div class="contact-button">
                <a href="#" id="modal-whatsapp-link" class="cta-button">
                    <i class="fab fa-whatsapp"></i> <span data-translate="continue-whatsapp">Continuer sur WhatsApp</span>
                </a>
            </div>
        </div>
    </div>

    <!-- Script pour le menu mobile -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const menuToggle = document.querySelector('.menu-toggle');
            const navMenu = document.querySelector('.nav-menu');
            const menuIcon = menuToggle.querySelector('i');

            menuToggle.addEventListener('click', () => {
                navMenu.classList.toggle('active');
                menuIcon.classList.toggle('fa-bars');
                menuIcon.classList.toggle('fa-times');
            });

            // Fermer le menu quand on clique sur un lien
            document.querySelectorAll('.nav-links a').forEach(link => {
                link.addEventListener('click', () => {
                    navMenu.classList.remove('active');
                    menuIcon.classList.add('fa-bars');
                    menuIcon.classList.remove('fa-times');
                });
            });

            // Fermer le menu quand on clique en dehors
            document.addEventListener('click', (e) => {
                if (!navMenu.contains(e.target) && !menuToggle.contains(e.target)) {
                    navMenu.classList.remove('active');
                    menuIcon.classList.add('fa-bars');
                    menuIcon.classList.remove('fa-times');
                }
            });
        });
    </script>
</body>
</html> 